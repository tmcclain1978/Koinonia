<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Koinonia · Create Account</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    /* Same design tokens for perfect visual match */
    :root {
      --bg1: #0b1223; --bg2: #101b38;
      --brand: #7bd2ff; --brand-2: #ffd166;
      --text: #eaf2ff; --muted: #9fb0cf;
      --card: rgba(14, 24, 49, 0.72); --card-border: rgba(123, 210, 255, 0.2);
      --focus: #7bd2ff; --error: #ff6b6b;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; color: var(--text);
      font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 700px at 20% 10%, #1a2b54 0%, transparent 60%),
                  radial-gradient(1000px 600px at 85% 20%, #0b4a77 0%, transparent 65%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow: hidden;
    }
    .orb, .orb2, .orb3 {
      position: absolute; filter: blur(40px); opacity: 0.35; pointer-events: none; mix-blend-mode: screen;
      animation: float 14s ease-in-out infinite;
    }
    .orb  { width: 480px; height: 480px; left: -120px; bottom: -120px; background: radial-gradient(circle at 30% 30%, #34a0ff, transparent 60%); }
    .orb2 { width: 380px; height: 380px; right: -100px; top: 10vh;   background: radial-gradient(circle at 70% 30%, #8a5cff, transparent 60%); animation-duration: 18s; }
    .orb3 { width: 320px; height: 320px; right: 15vw; bottom: -140px; background: radial-gradient(circle at 50% 50%, #ffd166, transparent 60%); animation-duration: 22s; }
    @keyframes float { 0%,100%{transform:translateY(0) translateX(0)} 50%{transform:translateY(-20px) translateX(8px)} }

    .wrap { position: relative; z-index: 1; height: 100%; display: grid; place-items: center; padding: 24px; }
    .card {
      width: 100%; max-width: 540px; background: var(--card);
      border: 1px solid var(--card-border); border-radius: 20px;
      box-shadow: 0 18px 60px rgba(0, 0, 0, 0.45), 0 2px 0 rgba(255,255,255,0.03) inset;
      backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
      padding: 28px;
    }

    .brand { display: flex; align-items: center; gap: 12px; margin-bottom: 8px; text-decoration: none; color: var(--text); }
    .brand svg { width: 40px; height: 40px; filter: drop-shadow(0 6px 12px rgba(123, 210, 255, 0.35)); }
    .brand-name { font-weight: 800; font-size: 1.25rem; letter-spacing: 0.3px; }

    .headline {
      margin: 8px 0 18px; font-size: 1.75rem; font-weight: 800;
      background: linear-gradient(90deg, #eaf2ff, #7bd2ff 60%, #ffd166 100%);
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    .subtitle { margin: 0 0 20px; color: var(--muted); font-size: 0.98rem; line-height: 1.45; }

    form { margin-top: 10px; display: grid; gap: 12px; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 560px){ .grid { grid-template-columns: 1fr; } }

    label { font-size: 0.9rem; color: #ccdaff; }
    .input {
      width: 100%; padding: 12px 14px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.04); color: var(--text); outline: none;
      transition: border-color 160ms ease, box-shadow 160ms ease, background 160ms ease;
    }
    .input::placeholder { color: #93a6c8; }
    .input:focus { border-color: rgba(123, 210, 255, 0.6); box-shadow: 0 0 0 3px rgba(123, 210, 255, 0.18); background: rgba(255,255,255,0.06); }

    .hint { color: var(--muted); font-size: 0.85rem; margin-top: 2px; }

    .btn {
      width: 100%; display: inline-flex; justify-content: center; align-items: center; gap: 8px;
      padding: 12px 16px; border: 0; border-radius: 12px; font-weight: 700; cursor: pointer;
      background: linear-gradient(180deg, #8de0ff, #55c8ff); color: #04223a;
      box-shadow: 0 10px 24px rgba(123, 210, 255, 0.35);
      transition: transform 120ms ease;
    }
    .btn:hover { transform: translateY(-1px); }

    .fine {
      font-size: 0.82rem; color: var(--muted); line-height: 1.4; margin-top: 2px;
    }
    .fine a { color: var(--brand-2); text-decoration: none; }
    .fine a:hover { text-decoration: underline; }

    .footer { margin-top: 14px; text-align: center; color: var(--muted); font-size: 0.95rem; }
    .accent-link { color: var(--brand-2); text-decoration: none; font-weight: 600; }
    .accent-link:hover { text-decoration: underline; }

    .flash {
      margin-bottom: 12px; padding: 10px 12px; border-radius: 10px;
      background: rgba(255, 107, 107, 0.12); border: 1px solid rgba(255, 107, 107, 0.35);
      color: #ffd2d2; font-size: 0.92rem;
    }
  </style>
</head>
<body>
  <div class="orb"></div>
  <div class="orb2"></div>
  <div class="orb3"></div>

  <div class="wrap">
    <main class="card" role="main" aria-labelledby="title">
      <a class="brand" href="{{ url_for('login') }}">
        <svg viewBox="0 0 64 64" aria-hidden="true">
          <defs>
            <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#7bd2ff"/>
              <stop offset="1" stop-color="#ffd166"/>
            </linearGradient>
          </defs>
          <path d="M10 12h12v40H10z" fill="url(#g1)"/>
          <path d="M24 32l18-20h12L38 32l16 20H42L24 32z" fill="url(#g1)"/>
        </svg>
        <span class="brand-name">Koinonia</span>
      </a>

      <h1 id="title" class="headline">Create your account</h1>
      <p class="subtitle">Join Koinonia to unlock AI-assisted trading, alerts, and strategy tools.</p>

      {% with messages = get_flashed_messages() %}
        {% if messages %}
          {% for m in messages %}
            <div class="flash">{{ m }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <form method="POST" action="{{ url_for('register') }}" novalidate>
        {% if csrf_token %}<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>{% endif %}

        <div class="grid">
          <div>
            <label for="first_name">First name</label>
            <input class="input" id="first_name" name="first_name" type="text" placeholder="Thomas" required>
          </div>
          <div>
            <label for="last_name">Last name</label>
            <input class="input" id="last_name" name="last_name" type="text" placeholder="McClain" required>
          </div>
        </div>

        <div>
          <label for="email">Email</label>
          <input class="input" id="email" name="email" type="email" placeholder="you@domain.com" required>
          <div class="hint">We’ll send a verification link to this email.</div>
        </div>

        <div>
          <label for="username">Username</label>
          <input class="input" id="username" name="username" type="text" placeholder="koinonia_user" required>
        </div>

        <div class="grid">
          <div>
            <label for="password">Password</label>
            <input class="input" id="password" name="password" type="password" placeholder="••••••••" minlength="8" required>
            <div class="hint">At least 8 characters</div>
          </div>
          <div>
            <label for="confirm_password">Confirm password</label>
            <input class="input" id="confirm_password" name="confirm_password" type="password" placeholder="••••••••" minlength="8" required>
          </div>
        </div>

        <div>
          <label for="tos" style="display:flex; gap:10px; align-items:flex-start;">
            <input id="tos" name="tos" type="checkbox" required style="transform: translateY(2px);" />
            <span class="fine">
              I agree to the <a href="{{ url_for('terms') if 'terms' in globals() else '#' }}">Terms</a> and
              <a href="{{ url_for('privacy') if 'privacy' in globals() else '#' }}">Privacy Policy</a>.
            </span>
          </label>
        </div>

        <button class="btn" type="submit" aria-label="Create your Koinonia account">
          <!-- user-plus icon -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M15 14c-3.86 0-7 3.14-7 7h2a5 5 0 0 1 10 0h2c0-3.86-3.14-7-7-7zM15 12a5 5 0 1 0-0.001-10.001A5 5 0 0 0 15 12zM4 10h3v2H4v3H2v-3H-1V10h3V7h2v3z"></path>
          </svg>
          Create Account
        </button>

        <p class="fine">Already have an account? <a href="{{ url_for('login') }}">Sign in</a></p>
      </form>

      <div class="footer">
        Need help? <a class="accent-link" href="{{ url_for('support') if 'support' in globals() else '#' }}">Contact support</a>
      </div>
    </main>
  </div>
</body>
</html>
