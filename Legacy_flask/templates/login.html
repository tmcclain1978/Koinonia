<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Koinonia · Login</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg1: #0b1223;
      --bg2: #101b38;
      --brand: #7bd2ff;      /* electric cyan accent */
      --brand-2: #ffd166;    /* warm gold accent */
      --text: #eaf2ff;
      --muted: #9fb0cf;
      --card: rgba(14, 24, 49, 0.72);
      --card-border: rgba(123, 210, 255, 0.2);
      --focus: #7bd2ff;
      --error: #ff6b6b;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background: radial-gradient(1200px 700px at 20% 10%, #1a2b54 0%, transparent 60%),
                  radial-gradient(1000px 600px at 85% 20%, #0b4a77 0%, transparent 65%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow: hidden;
    }

    /* Subtle animated orbs for “wow” factor */
    .orb, .orb2, .orb3 {
      position: absolute;
      filter: blur(40px);
      opacity: 0.35;
      pointer-events: none;
      mix-blend-mode: screen;
      animation: float 14s ease-in-out infinite;
    }
    .orb  { width: 480px; height: 480px; left: -120px; bottom: -120px; background: radial-gradient(circle at 30% 30%, #34a0ff, transparent 60%); }
    .orb2 { width: 380px; height: 380px; right: -100px; top: 10vh;   background: radial-gradient(circle at 70% 30%, #8a5cff, transparent 60%); animation-duration: 18s; }
    .orb3 { width: 320px; height: 320px; right: 15vw; bottom: -140px; background: radial-gradient(circle at 50% 50%, #ffd166, transparent 60%); animation-duration: 22s; }
    @keyframes float {
      0%, 100% { transform: translateY(0) translateX(0); }
      50%      { transform: translateY(-20px) translateX(8px); }
    }

    .wrap {
      position: relative;
      z-index: 1;
      height: 100%;
      display: grid;
      place-items: center;
      padding: 24px;
    }

    .card {
      width: 100%;
      max-width: 440px;
      background: var(--card);
      border: 1px solid var(--card-border);
      border-radius: 20px;
      box-shadow:
        0 18px 60px rgba(0, 0, 0, 0.45),
        0 2px 0 rgba(255,255,255,0.03) inset;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      padding: 28px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
      text-decoration: none;
      color: var(--text);
    }
    .brand svg {
      width: 40px; height: 40px;
      filter: drop-shadow(0 6px 12px rgba(123, 210, 255, 0.35));
    }
    .brand-name {
      font-weight: 800;
      font-size: 1.25rem;
      letter-spacing: 0.3px;
    }

    .headline {
      margin: 8px 0 18px;
      font-size: 1.75rem;
      font-weight: 800;
      background: linear-gradient(90deg, #eaf2ff, #7bd2ff 60%, #ffd166 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .subtitle {
      margin: 0 0 20px;
      color: var(--muted);
      font-size: 0.98rem;
      line-height: 1.45;
    }

    form { margin-top: 10px; display: grid; gap: 12px; }
    .input-group {
      display: grid; gap: 8px;
    }
    label {
      font-size: 0.9rem;
      color: #ccdaff;
    }
    .input {
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.04);
      color: var(--text);
      outline: none;
      transition: border-color 160ms ease, box-shadow 160ms ease, background 160ms ease;
    }
    .input::placeholder { color: #93a6c8; }
    .input:focus {
      border-color: rgba(123, 210, 255, 0.6);
      box-shadow: 0 0 0 3px rgba(123, 210, 255, 0.18);
      background: rgba(255,255,255,0.06);
    }

    .row {
      display: flex; justify-content: space-between; align-items: center;
    }

    .btn {
      width: 100%;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      border: 0;
      border-radius: 12px;
      font-weight: 700;
      cursor: pointer;
      transition: transform 120ms ease, box-shadow 120ms ease, background 200ms ease;
      background: linear-gradient(180deg, #8de0ff, #55c8ff);
      color: #04223a;
      box-shadow: 0 10px 24px rgba(123, 210, 255, 0.35);
    }
    .btn:hover { transform: translateY(-1px); }
    .btn:active { transform: translateY(0); }

    .muted-link {
      color: var(--muted);
      text-decoration: none;
      font-size: 0.92rem;
    }
    .muted-link:hover { color: #c7d7ff; }

    .divider {
      display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 12px;
      margin: 14px 0 4px;
      color: #9fb0cf;
      font-size: 0.85rem;
    }
    .divider::before, .divider::after {
      content: ""; height: 1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.16), transparent);
    }

    .footer {
      margin-top: 14px; text-align: center; color: var(--muted); font-size: 0.95rem;
    }
    .accent-link {
      color: var(--brand-2);
      text-decoration: none; font-weight: 600;
    }
    .accent-link:hover { text-decoration: underline; }

    /* Flash messages */
    .flash {
      margin-bottom: 12px;
      padding: 10px 12px;
      border-radius: 10px;
      background: rgba(255, 107, 107, 0.12);
      border: 1px solid rgba(255, 107, 107, 0.35);
      color: #ffd2d2;
      font-size: 0.92rem;
    }

    @media (max-width: 480px) {
      .card { padding: 22px; }
      .headline { font-size: 1.45rem; }
    }
  </style>
</head>
<body>
  <!-- animated background orbs -->
  <div class="orb"></div>
  <div class="orb2"></div>
  <div class="orb3"></div>

  <div class="wrap">
    <main class="card" role="main" aria-labelledby="title">
      <a class="brand" href="/">
        <!-- Inline Koinonia logo mark (clean geometric “K” knot) -->
        <svg viewBox="0 0 64 64" aria-hidden="true">
          <defs>
            <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#7bd2ff"/>
              <stop offset="1" stop-color="#ffd166"/>
            </linearGradient>
          </defs>
          <path d="M10 12h12v40H10z" fill="url(#g1)"/>
          <path d="M24 32l18-20h12L38 32l16 20H42L24 32z" fill="url(#g1)"/>
        </svg>
        <span class="brand-name">Koinonia</span>
      </a>

      <h1 id="title" class="headline">Welcome back</h1>
      <p class="subtitle">Sign in to access your trading dashboard, AI engine, and analytics.</p>

      <!-- Flask flash support -->
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          {% for m in messages %}
            <div class="flash">{{ m }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <form method="POST" action="{{ url_for('login') }}" autocomplete="on" novalidate>
        {% if csrf_token %}<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>{% endif %}

        <div class="input-group">
          <label for="username">Email or Username</label>
          <input class="input" id="username" name="username" type="text" placeholder="you@domain.com" required autofocus>
        </div>

        <div class="input-group">
          <div class="row">
            <label for="password">Password</label>
            <a class="muted-link" href="{{ url_for('forgot_password') if 'forgot_password' in globals() else '#' }}">Forgot?</a>
          </div>
          <input class="input" id="password" name="password" type="password" placeholder="••••••••" required>
        </div>

        <button class="btn" type="submit" aria-label="Sign in to Koinonia">
          <!-- login icon -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M10 17l5-5-5-5v10z"></path><path d="M4 4h6v2H6v12h4v2H4z"></path>
          </svg>
          Sign In
        </button>
      </form>

      <div class="divider">or</div>

      <div class="footer">
        New to Koinonia?
        <a class="accent-link" href="{{ url_for('register') }}">Create your account</a>
      </div>
    </main>
  </div>
</body>
</html>
